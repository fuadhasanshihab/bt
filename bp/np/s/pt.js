function PrayTimes(i){var t,n,a,r,s,e={imsak:"Imsak",fajr:"Fajr",sunrise:"Sunrise",dhuhr:"Dhuhr",asr:"Asr",sunset:"Sunset",maghrib:"Maghrib",isha:"Isha",midnight:"Midnight"},h={MWL:{name:"Muslim World League",params:{fajr:18,isha:17}},ISNA:{name:"Islamic Society of North America (ISNA)",params:{fajr:15,isha:15}},Egypt:{name:"Egyptian General Authority of Survey",params:{fajr:19.5,isha:17.5}},Makkah:{name:"Umm Al-Qura University, Makkah",params:{fajr:18.5,isha:"90 min"}},Karachi:{name:"University of Islamic Sciences, Karachi",params:{fajr:18,isha:18}},Tehran:{name:"Institute of Geophysics, University of Tehran",params:{fajr:17.7,isha:14,maghrib:4.5,midnight:"Jafari"}},Jafari:{name:"Shia Ithna-Ashari, Leva Institute, Qum",params:{fajr:16,isha:14,maghrib:4,midnight:"Jafari"}}},u="MWL",o={imsak:"10 min",dhuhr:"0 min",asr:"Standard",highLats:"NightMiddle"},f="24h",m=["am","pm"],c={},g={maghrib:"0 min",midnight:"Standard"};for(var $ in h){var _=h[$].params;for(var d in g)void 0===_[d]&&(_[d]=g[d])}var _=h[u=h[i]?i:u].params;for(var l in _)o[l]=_[l];for(var $ in e)c[$]=0;return{setMethod:function(i){h[i]&&(this.adjust(h[i].params),u=i)},adjust:function(i){for(var t in i)o[t]=i[t]},tune:function(i){for(var t in i)c[t]=i[t]},getMethod:function(){return u},getSetting:function(){return o},getOffsets:function(){return c},getDefaults:function(){return h},getTimes:function(i,e,h,u,o){return t=1*e[0],n=1*e[1],a=e[2]?1*e[2]:0,f=o||f,i.constructor===Date&&(i=[i.getFullYear(),i.getMonth()+1,i.getDate()]),(void 0===h||"auto"==h)&&(h=this.getTimeZone(i)),(void 0===u||"auto"==u)&&(u=this.getDst(i)),r=1*h+(1*u?1:0),s=this.julian(i[0],i[1],i[2])-n/360,this.computeTimes()},getFormattedTime:function(i,t,n){if(isNaN(i))return"-----";if("Float"==t)return i;n=n||m;var a=Math.floor(i=DMath.fixHour(i+.5/60)),r=Math.floor((i-a)*60),s="12h"==t?n[a<12?0:1]:"";return("24h"==t?this.twoDigitsFormat(a):(a+12-1)%12+1)+":"+this.twoDigitsFormat(r)+(s?" "+s:"")},midDay:function(i){var t=this.sunPosition(s+i).equation;return DMath.fixHour(12-t)},sunAngleTime:function(i,n,a){var r=this.sunPosition(s+n).declination,e=this.midDay(n),h=1/15*DMath.arccos((-DMath.sin(i)-DMath.sin(r)*DMath.sin(t))/(DMath.cos(r)*DMath.cos(t)));return e+("ccw"==a?-h:h)},asrTime:function(i,n){var a=this.sunPosition(s+n).declination,r=-DMath.arccot(i+DMath.tan(Math.abs(t-a)));return this.sunAngleTime(r,n)},sunPosition:function(i){var t=i-2451545,n=DMath.fixAngle(357.529+.98560028*t),a=DMath.fixAngle(280.459+.98564736*t),r=DMath.fixAngle(a+1.915*DMath.sin(n)+.02*DMath.sin(2*n));DMath.cos(n),DMath.cos(2*n);var s=23.439-36e-8*t,e=DMath.arctan2(DMath.cos(s)*DMath.sin(r),DMath.cos(r))/15,h=a/15-DMath.fixHour(e);return{declination:DMath.arcsin(DMath.sin(s)*DMath.sin(r)),equation:h}},julian:function(i,t,n){t<=2&&(i-=1,t+=12);var a=Math.floor(i/100);return Math.floor(365.25*(i+4716))+Math.floor(30.6001*(t+1))+n+(2-a+Math.floor(a/4))-1524.5},computePrayerTimes:function(i){i=this.dayPortion(i);var t,n=o,a=this.sunAngleTime(this.eval(n.imsak),i.imsak,"ccw"),r=this.sunAngleTime(this.eval(n.fajr),i.fajr,"ccw"),s=this.sunAngleTime(this.riseSetAngle(),i.sunrise,"ccw"),e=this.midDay(i.dhuhr),h=this.asrTime(this.asrFactor(n.asr),i.asr),u=this.sunAngleTime(this.riseSetAngle(),i.sunset);return{imsak:a,fajr:r,sunrise:s,dhuhr:e,asr:h,sunset:u,maghrib:this.sunAngleTime(this.eval(n.maghrib),i.maghrib),isha:this.sunAngleTime(this.eval(n.isha),i.isha)}},computeTimes:function(){for(var i={imsak:5,fajr:5,sunrise:6,dhuhr:12,asr:13,sunset:18,maghrib:18,isha:18},t=1;t<=1;t++)i=this.computePrayerTimes(i);return(i=this.adjustTimes(i)).midnight="Jafari"==o.midnight?i.sunset+this.timeDiff(i.sunset,i.fajr)/2:i.sunset+this.timeDiff(i.sunset,i.sunrise)/2,i=this.tuneTimes(i),this.modifyFormats(i)},adjustTimes:function(i){var t=o;for(var a in i)i[a]+=r-n/15;return"None"!=t.highLats&&(i=this.adjustHighLats(i)),this.isMin(t.imsak)&&(i.imsak=i.fajr-this.eval(t.imsak)/60),this.isMin(t.maghrib)&&(i.maghrib=i.sunset+this.eval(t.maghrib)/60),this.isMin(t.isha)&&(i.isha=i.maghrib+this.eval(t.isha)/60),i.dhuhr+=this.eval(t.dhuhr)/60,i},asrFactor:function(i){return({Standard:1,Hanafi:2})[i]||this.eval(i)},riseSetAngle:function(){return .833+.0347*Math.sqrt(a)},tuneTimes:function(i){for(var t in i)i[t]+=c[t]/60;return i},modifyFormats:function(i){for(var t in i)i[t]=this.getFormattedTime(i[t],f);return i},adjustHighLats:function(i){var t=o,n=this.timeDiff(i.sunset,i.sunrise);return i.imsak=this.adjustHLTime(i.imsak,i.sunrise,this.eval(t.imsak),n,"ccw"),i.fajr=this.adjustHLTime(i.fajr,i.sunrise,this.eval(t.fajr),n,"ccw"),i.isha=this.adjustHLTime(i.isha,i.sunset,this.eval(t.isha),n),i.maghrib=this.adjustHLTime(i.maghrib,i.sunset,this.eval(t.maghrib),n),i},adjustHLTime:function(i,t,n,a,r){var s=this.nightPortion(n,a),e="ccw"==r?this.timeDiff(i,t):this.timeDiff(t,i);return(isNaN(i)||e>s)&&(i=t+("ccw"==r?-s:s)),i},nightPortion:function(i,t){var n=o.highLats,a=.5;return"AngleBased"==n&&(a=1/60*i),"OneSeventh"==n&&(a=1/7),a*t},dayPortion:function(i){for(var t in i)i[t]/=24;return i},getTimeZone:function(i){var t=i[0],n=this.gmtOffset([t,0,1]),a=this.gmtOffset([t,6,1]);return Math.min(n,a)},getDst:function(i){return 1*(this.gmtOffset(i)!=this.getTimeZone(i))},gmtOffset:function(i){var t=new Date(i[0],i[1]-1,i[2],12,0,0,0),n=t.toGMTString(),a=new Date(n.substring(0,n.lastIndexOf(" ")-1));return(t-a)/36e5},eval:function(i){return 1*(i+"").split(/[^0-9.+-]/)[0]},isMin:function(i){return -1!=(i+"").indexOf("min")},timeDiff:function(i,t){return DMath.fixHour(t-i)},twoDigitsFormat:function(i){return i<10?"0"+i:i}}}var DMath={dtr:function(i){return i*Math.PI/180},rtd:function(i){return 180*i/Math.PI},sin:function(i){return Math.sin(this.dtr(i))},cos:function(i){return Math.cos(this.dtr(i))},tan:function(i){return Math.tan(this.dtr(i))},arcsin:function(i){return this.rtd(Math.asin(i))},arccos:function(i){return this.rtd(Math.acos(i))},arctan:function(i){return this.rtd(Math.atan(i))},arccot:function(i){return this.rtd(Math.atan(1/i))},arctan2:function(i,t){return this.rtd(Math.atan2(i,t))},fixAngle:function(i){return this.fix(i,360)},fixHour:function(i){return this.fix(i,24)},fix:function(i,t){return(i-=t*Math.floor(i/t))<0?i+t:i}},prayTimes=new PrayTimes;
